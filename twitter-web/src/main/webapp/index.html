<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Twitter Interest Community Builder</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link href='http://fonts.googleapis.com/css?family=Roboto:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/main.css">
	<script src="js/vendor/modernizr-2.6.2.min.js"></script>
</head>
    
<body ng-app="twitterWeb.app">
	<div class="container-fluid page-title">
		<h1 class="text-center text-title"><a href="/" target="_self" class="plain-link"><img class="icon-twit" src="img/twitter-256.png" height="48"> Twinterest Explorer <span class="it">(Beta)</span></a></h1>
	</div>
    	
    <div class="container" ng-controller="TwitterController">  
      	
   		<div class="row">
   			<div class="col-md-3">
    			<h4>By seed user:</h4>
	    		<form class="form-target-user" ng-submit="getSeedUser()">
				    <div class="input-group input-group-lg text-muted">
				    	<span class="input-group-addon">@</span>
						<input ng-model="screenName" type="text" class="form-control">
						<span class="input-group-btn">
							<button class="btn btn-default" ng-click="getSeedUser()" type="button">Go!</button>
						</span>
				    </div>
			    </form>
		    </div>
		    <div class="col-md-3">
    			<h4>By keyword:</h4>
	    		<form class="form-target-user" ng-submit="getKeywordUsers(keyword)">
				    <div class="input-group input-group-lg">
						<input ng-model="keyword" type="text" class="form-control">
						<span class="input-group-btn">
							<button class="btn btn-default" ng-click="getKeywordUsers(keyword)" type="button">Go!</button>
						</span>
				    </div>
			    </form>
		    </div>
		    <div class="col-md-2" style="padding-top: 32px;">
				<input type="file" id="gtfile">
				<button id="gtupload" class="btn btn-default" type="button">Upload a ground truth file</button>
			</div>
			<div class="col-md-2" style="padding-top: 32px;">
				<input type="file" id="ldafile">
				<button id="ldaupload" class="btn btn-default" type="button">Upload an LDA result file</button>
			</div>
		    <div class="col-md-1 text-muted" style="padding-top: 44px;">
    			<a href="" data-toggle="modal" data-target="#settingsModal" ng-click="openModal = true"><i class="fa fa-gear pull-left" style="color: #666666; font-size: 36px;"></i></a>
    			<div class="text-right" style="color: #000; display: inline; margin-left: 16px;" ng-if="processing && !finished || loadingNetwork || loadingSimilarityGraph  && !userChanged()">
	    			<i class="fa fa-spinner fa-spin text-loading"></i>
				</div>
		    </div>
		    
		    
		</div>
		
		<div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog" style="width: 90%">
				<div class="modal-content">
					<div class="modal-header text-center">
						<button type="button" class="close" data-dismiss="modal">
							<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
						</button>
						<h4 class="modal-title" id="myModalLabel">Settings</h4>
					</div>
					<div class="modal-body">
						<div class="row">
							<div class="col-md-6">
								<h3>Twitter mining</h3>
							</div>
							<div class="col-md-6">
								<h3>Named Entity Recognition</h3>
							</div>
						</div>
						<div class="row">
							<div class="col-md-1">
					    		# of users: <input type="text" ng-model="userCount" class="form-control">
					    	</div>
					    	<div class="col-md-1">
					    		Tweets/user: <input type="text" ng-model="tweetsPerUser" class="form-control">
					    	</div>
					    	<div class="col-md-2">
					    		Processed in groups of: <input type="text" ng-model="concatenation" class="form-control">
					    	</div>
					    	<div class="col-md-3">
					    		<div>Mining mode:</div> 
					    		<div class="btn-group" data-toggle="buttons">
							        <label class="btn btn-default active"><input type="radio" name="year" value="none" checked="">None</label>
							        <label class="btn btn-default"><input type="radio" name="year" value="new">New</label>
							        <label class="btn btn-default"><input type="radio" name="year" value="all">All</label>
							    </div>
					    	</div>
					    	<div class="col-md-1">NER confidence: <input type="text" ng-model="nerConfidence" class="form-control"></div>
					    	<div class="col-md-1">NER support: <input type="text" ng-model="nerSupport" class="form-control"></div>
					    </div>
					    <div class="row">
							<div class="col-md-6">
								<h3>User collection restrictions</h3>
							</div>
							<div class="col-md-6">
								<h3>Clustering</h3>
							</div>
						</div>
					    <div class="row">
					    	<div class="col-md-1">Min. followers: <input type="text" ng-model="minFollowers" class="form-control"></div>
					    	<div class="col-md-1">Max. followers: <input type="text" ng-model="maxFollowers" class="form-control"></div>
					    	<div class="col-md-1">Min. following: <input type="text" ng-model="minFollowing" class="form-control"></div>
					    	<div class="col-md-1">Max. following: <input type="text" ng-model="maxFollowing" class="form-control"></div>
					    	<div class="col-md-1">Min. tweets: <input type="text" ng-model="minTweets" class="form-control"></div>
					    	<div class="col-md-1">Max. tweets: <input type="text" ng-model="maxTweets" class="form-control"></div>
					    	
					    	<div class="col-md-2">
					    		Generality bias (-1 to 1): <input type="text" ng-model="generalityBias" class="form-control">
					    	</div>
					    	<div class="col-md-2">
					    		Similarity threshold: <input type="text" ng-model="minimumSimilarity" class="form-control">
					    	</div>
					    	
					    </div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Save & close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="row row-settings" ng-cloak>
    		<div class="col-md-12 spinner-large text-center" ng-if="loadingUser"><i class="fa fa-spinner fa-spin"></i></div>

		    <h1 class="col-md-12 text-center text-muted" style="margin-top: 64px;" ng-if="noUserFound">No user found with that screen name.</h1>
	    	
	    	<div class="animate-show-hide" ng-show="!loadingNetwork && users[0].userOntology.ontology && users.length <= 1 && !userChanged()">
		    	<div class="col-md-2">
					<input type="file" id="files">
					<button id="upload" class="btn btn-default" type="button">Upload DCG file</button>
			    </div>
		    	
		    	<div ng-if="users[0].followersCount < maxSeedUserFollowers" class="col-md-2 text-right">
			    	<a class="btn btn-lg btn-success btn-get-network" ng-click="getTargetUserNetwork(users[0])" href="#">
							<i class="fa fa-2x pull-left"></i>Collect followers</a>
	    		</div>
	    		<div class="col-md-6 text-muted" ng-if="users[0].followersCount >= maxSeedUserFollowers"><h4>Too many followers. Try a user with less than 10000 followers, or specify a user list manually.</h4></div>
	    		
	    	</div>

				<div class="col-md-3 animate-show-hide" ng-show="!userChanged()" ng-cloak>
		    		Generality bias (0-1): <input type="text" ng-model="generalityBias" class="form-control">
		    	</div>
		    	<div class="col-md-3 animate-show-hide" ng-show="!userChanged()" ng-cloak>
		    		Similarity threshold: <input type="text" ng-model="minimumSimilarity" class="form-control">
		    	</div>
	    	
	    	<div class="col-md-6 text-right animate-if" ng-if="users.length > 1 && !processing && !userChanged()" ng-cloak>
	    		<a class="btn btn-lg btn-success btn-get-network" ng-click="processNetwork(processIndex)" href="#">
							<i class="fa fa-2x pull-left"></i>Process network</a>
			</div>
			
			<div class="col-md-6 text-right animate-if" ng-if="finished && !loadingSimilarityGraph && !finishedSimilarityGraph && !userChanged()" ng-cloak>
	    		<a class="btn btn-lg btn-success btn-get-network" ng-click="calculateSimilarityGraph()" href="#">
							<i class="fa fa-2x pull-left"></i>Cluster network</a>
			</div>
			
			<div class="text-center animate-show-hide" ng-show="showSimilarityGraph" ng-cloak>
		    	<!-- <h4>Clustering...</h4> -->
		    	
			</div>
		</div>
		
		<div class="row text-center animate-show-hide" ng-show="showSimilarityGraph" ng-cloak>
			<div id="graph" class="graph col-md-12"></div>
			<div class="row text-left" ng-repeat="entry in legend">
				<div class="col-md-12" style="font-size: 16px; display: inline;">
					<div style="display: inline; background-color: {{ colors[$index] }}; width: 48px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>&nbsp;&nbsp;&nbsp;<div style="display: inline;" ng-bind="entry"></div>
				</div>
			</div>
		</div>
		    
		<div class="row panel-target-user animate-if" ng-if="users[0].screenName" ng-include="'templates/user-panel.html'" ng-init="targetUser = users[0]" ng-cloak></div>

	<!-- 	<div ng-if="users.length > 1" ng-cloak>
			<h3>Follower network:</h3>
		</div> -->

		
		<!-- <div class="col-md-12" ng-if="users.length > 1" ng-cloak>
    		<a class="btn btn-lg btn-success btn-get-network" ng-click="showAllUsers = !showAllUsers" href="#">
						<i class="fa fa-2x pull-left"></i>Show all users</a>
		</div> -->
		
   		<div infinite-scroll="loadMore()" infinite-scroll-disabled="pageSize >= 300" infinite-scroll-distance='0' ng-cloak>
   				<div class="row panel-target-user" ng-include="'templates/user-panel.html'" ng-repeat="targetUser in users | limitTo:pageSize" ng-show="!$first"></div>
   		</div>
    </div>
    
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-resource.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-animate.min.js"></script>
	<!-- <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script> -->
	
	<script src="js/vendor/d3.v3.min.js" charset="utf-8"></script>
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
       
	<script src="js/vendor/ng-infinite-scroll.min.js"></script>
	<script src="js/plugins.js"></script>
	<script src="js/main.js"></script>
	<script src="js/angular/services/graph-service.js"></script>
	<script src="js/angular/apps.js"></script>
	<script src="js/angular/controllers.js"></script>
	<script src="js/angular/services/worker-services.js"></script>
	<script src="js/angular/services/evaluation-services.js"></script>
	<script src="js/angular/services/api-service.js"></script>
</body>
</html>
